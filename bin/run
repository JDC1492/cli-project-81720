#!/usr/bin/env ruby
require 'rest-client'
require 'json'
require 'pry'
require_relative '../lib/api'
require_relative '../lib/cli'
require_relative '../lib/plant'


resp = RestClient.get('https://trefle.io/api/v1/plants?token=7jharOHxyyJNNnPiuAkMe0EvzCR_F7MQkHt0S-1__LM')
tref_hash = JSON.parse(resp.body, symbolize_names:true)
tref_array = tref_hash[:data]

plant_id = tref_array.collect do |plant|
    Plants.new(plant)
end
 
URL='https://trefle.io/'
token = '?token=7jharOHxyyJNNnPiuAkMe0EvzCR_F7MQkHt0S-1__LM'

plant_id.each do |pi| 
    binding.pry
    resp = RestClient.get(URL + pi.link + token)
    id_hash = JSON.parse(resp.body, symbolize_names:true)
    binding.pry
    pi.common_name = pi[:common_name]
    pi.scientific_name = pi[:scientific_name]
    pi.family = pi[:family]
    pi.duration = pi[:duration]
    pi.edile = pi[:edile]
end


# CLI.new.greet